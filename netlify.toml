[build]
# command = "npm run build"
# publish = "dist"
command = "react-router build"
publish = "build/client"

[functions]
  directory = "build/server"
  node_bundler = "esbuild"
  node_target = "node20"

[functions."*"]
  [functions."*".environment]
    NODE_OPTIONS = "--experimental-specifier-resolution=node"

[dev]
# command = "npm run dev"
command = "react-router dev"
port = 3000

[[redirects]]
from = "/*"
to = "/index.html"
status = 200